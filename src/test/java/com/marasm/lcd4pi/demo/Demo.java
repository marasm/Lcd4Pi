package com.marasm.lcd4pi.demo;import java.io.IOException;import com.marasm.lcd4pi.Button;import com.marasm.lcd4pi.ButtonListener;import com.marasm.lcd4pi.ButtonPressedObserver;import com.marasm.lcd4pi.ILCD;import com.marasm.lcd4pi.RealLCD.Direction;import com.marasm.lcd4pi.mocks.MockupLCD;import com.pi4j.io.i2c.I2CFactory.UnsupportedBusNumberException;public class Demo {	private final static LCDTest[] TESTS = { new HelloWorldTest(),			new ScrollTest(), new CursorDemo(), new DisplayDemo(),			new ColorDemo(), new AutoScrollDemo(), new ExitTest() };	private static int currentTest = -1;	public static void main(String[] args) throws IOException,			InterruptedException, UnsupportedBusNumberException {		final ILCD lcd = new MockupLCD();		lcd.setText("LCD Test!\nPress up/down...");		ButtonPressedObserver observer = new ButtonPressedObserver(lcd);		observer.addButtonListener(new ButtonListener() {			@Override			public void onButtonPressed(Button button) {				try {					switch (button) {					case UP:						currentTest = --currentTest < 0 ? 0 : currentTest;						lcd.clear();						lcd.setText(String.format("#%d:%s\nPress Sel to run!",								currentTest, TESTS[currentTest].getName()));						break;					case DOWN:						currentTest = ++currentTest > (TESTS.length - 1) ? TESTS.length - 1								: currentTest;						lcd.clear();						lcd.setText(String.format("#%d:%s\nPress Sel to run!",								currentTest, TESTS[currentTest].getName()));						break;					case RIGHT:						lcd.scrollDisplay(Direction.LEFT);						break;					case LEFT:						lcd.scrollDisplay(Direction.RIGHT);						break;					case SELECT:						runTest(currentTest);						break;					default:						lcd.clear();						lcd.setText(String.format(								"Button %s\nis not in use...",								button.toString()));					}				} catch (IOException e) {					handleException(e);				}			}			private void runTest(int currentTest) {				LCDTest test = TESTS[currentTest];				System.out.println("Running test " + test.getName());				try {					test.run(lcd);				} catch (IOException e) {					handleException(e);				}			}		});		System.out.println("Press enter to quit!");		System.in.read();		lcd.stop();	}	private static void handleException(IOException e) {		System.out.println("Problem talking to LCD! Exiting!");		e.printStackTrace();		System.exit(2);	}}